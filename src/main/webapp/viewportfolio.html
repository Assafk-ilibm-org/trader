<!DOCTYPE html>
<html>
<head>
    <title>Stock Portfolio</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="node_modules/@hybrid-cloud/cirrus/dist/css/cirrus.min.css">
    <link rel="stylesheet" href="css/trader.css">
    <link rel="import" href="header.html"/>
    <script src='node_modules/@hybrid-cloud/cirrus/dist/js/cirrus.es5.min.js'></script>
</head>
<body data-peripheral="none">
<script>
    var link = document.querySelector('link[rel="import"]');
    var content = link.import;

    // Grab DOM from warning.html's document.
    var el = content.querySelector('.global-header');

    document.body.appendChild(el.cloneNode(true));
</script>
<script>
    var qs = (function (a) {
        if (a == "") return {};
        var b = {};
        for (var i = 0; i < a.length; ++i) {
            var p = a[i].split('=', 2);
            if (p.length == 1)
                b[p[0]] = "";
            else
                b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
        return b;
    })(window.location.search.substr(1).split('&'));

    function getOwner() {
        var span = document.getElementById("portfolioOwner");
        console.log(span);
        console.log(qs["owner"]);
        span.textContent = qs["owner"];
    }
</script>
<!-- TODO Replace this with a REST Request-->
<!--
String owner = request.getParameter("owner
JsonObject portfolio = PortfolioServices.getPortfolio(owner);
double overallTotal = portfolio.getJsonNumber("total").doubleValue();
String loyaltyLevel = portfolio.getString("loyalty
JsonObject stocks = portfolio.getJsonObject("stocks
-->
<header class="detail-page-header detail-page-header--expanded">
    <a class="detail-page-header__link" href="">
        <svg class="icon icon--arrow-left">
            <use xmlns:xlink="http://www.w3.org/1999/xlink"
                 xlink:href="node_modules/@hybrid-cloud/cirrus/dist/icons/sprite.svg#arrow-left"></use>
        </svg>
        <span class="detail-page-header__breadcrumb">Previous</span>
    </a>
    <!-- TODO make this name dynamic -->
    <h2 class="h2 detail-page-header__heading">
        <span id="portfolioOwner" class="u-text--bold" onload="getOwner()">John Doe</span>
    </h2>
</header>
<main class="main" role="main">
    <section class="section"></section>
    <section class="section">
        <div class="container">
            <section id="clientInfo" class="section">
                <div class="row">
                    <div id="box-stock" class="box box--9">
                        <section class="section">
                            <div class="box box--9">
                                <div class="row">
                                    <div class="box box--full">
                                        <div class="module">
                                            <header class="module__header">
                                                <h6 class="h5 module__heading">Client Overview</h6>
                                                <!-- TODO -->
                                                Client since August 2017
                                            </header>
                                            <section class="module__body">
                                                Customer info<br/>
                                                Total Portfolio Value: $"+currency.format(overallTotal)+"<br/>
                                                Loyalty Level: "+loyaltyLevel+"<br/>
                                            </section>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </section>
                        <section id="stockHoldings" class="section">
                            <div class="box box--9">
                                <div class="row">
                                    <div class="box box--full">
                                        <div class="module">
                                            <table class="table" border="1" cellpadding="5">
                                                <caption class="table-header"><span
                                                        class="u-text--bold">Stock Portfolio</span>
                                                </caption>
                                                <thead class="table__head">
                                                <tr class="table__row">
                                                    <th class="table__cell" scope="col">Stock Symbol
                                                        <svg class="icon icon--down">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                 xlink:href="node_modules/@hybrid-cloud/cirrus/dist/icons/sprite.svg#arrow-down"></use>
                                                        </svg>
                                                    </th>
                                                    <th class="table__cell" scope="col">Shares
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                             xlink:href="assets/icons/sprite.svg#arrow-down"></use>
                                                        </svg>
                                                    </th>
                                                    <th class="table__cell" scope="col">Price
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                             xlink:href="assets/icons/sprite.svg#arrow-down"></use>
                                                        </svg>
                                                    </th>
                                                    <th class="table__cell" scope="col">Date Quoted
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                             xlink:href="assets/icons/sprite.svg#arrow-down"></use>
                                                        </svg>
                                                    </th>
                                                    <th class="table__cell" scope="col">Total
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                             xlink:href="assets/icons/sprite.svg#arrow-down"></use>
                                                        </svg>
                                                    </th>
                                                </thead>
                                                <tbody class="table__body">

                                                </tbody>
                                                <!-- TODO Replace this with a REST Request-->
                                                <!-- writer.append(getTableRows(stocks)); -->
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                    <div id="box-recommendation" class="box box--3">
                        <section class="section">
                            <div class="box box--9">
                                <div class="row">
                                    <div class="box box--full">
                                        <div class="module">
                                            <header class="module__header">
                                                <h6 class="h5 module__heading">Recommendations</h6>
                                            </header>
                                            <section class="module__body">
                                                <h6 class="h6 module__heading">Issue</h6>
                                                John is a Moderate Risk Tolerance investor.
                                                <br/><br/>
                                                <h6 class="h6 module__heading">Solution</h6>
                                                Sell some stocks.
                                            </section>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </section>
        </div>
    </section>
</main>
</body>
</html>